{% extends 'admin.html' %}
{% load static %}
<head>
    <link rel="stylesheet" href="{% static 'assets/css/agency_dashboard.css' %}">
</head>
{% block content %}
<div class="body">
    <section class="dashboard">
        <h2>Manage Travel Packages</h2>
        <div class="dashboard-options package-list">
            {% for package in packages %}
                <div class="package-box">
                    <!-- Display all images related to the package -->
                    {% for image in package.package_images.all %}
                        <img src="{{ image.image.url }}" alt="{{ package.title }}" style="max-width: 200px; height: auto;">
                    {% empty %}
                        <p>No image available</p>
                    {% endfor %}

                    <!-- Package details -->
                    <h3>{{ package.title }}</h3>
                    <p><strong>Description:</strong> {{ package.description }}</p>
                    <p><strong>Price:</strong> â‚¹{{ package.price }}</p>
                    <p><strong>Number of Days:</strong> {{ package.duration }} </p>
                    <p><strong>Origin:</strong> {{ package.origin }}</p>
                    <p><strong>Destination:</strong> {{ package.destination }}</p>
                    <p><strong>Departure Day:</strong> {{ package.departure_day }}</p>

                    <!-- Display if the package includes destination charges -->
                    <p><strong>Includes Destination Charges:</strong> 
                        {% if package.include_charges %}
                            Yes
                        {% else %}
                            No
                        {% endif %}
                    </p>

                    <!-- Actions (Delete or Update) -->
                    <div class="btn-group">
                        <a href="{% url 'admin_delete_package' package.package_id %}" class="btn" onclick="return confirmDelete();">Delete</a>
                    </div>
                </div>
            {% empty %}
                <p>No packages available</p>
            {% endfor %}
        </div>

        <script>
            function confirmDelete() {
                return confirm('Are you sure you want to delete this package?');
            }
        </script>
    </section>
</div>
{% endblock %}
